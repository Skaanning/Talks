<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Celebrating New Year's Eve with F# and Suave</title>
    <meta name="description" content="You would expect that the largest number of "Happy New Year" tweets would in every
part of the world would appear around the midnight of December 31. But can we nicely visualize
the live stream of tweets and see the tweets live as the old year comes to its end? I'll talk
about a project I did for New Year's Eve 2015-2016 that does exactly this!">
    <meta name="author" content="Tomas Petricek">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">type TrendsAvailable = obj<br /><br />Full name: index.TrendsAvailable</div>
<div class="tip" id="fs2">type TrendsPlace = obj<br /><br />Full name: index.TrendsPlace</div>
<div class="tip" id="fs3">type TrendsClosest = obj<br /><br />Full name: index.TrendsClosest</div>
<div class="tip" id="fs4">Multiple items<br />type Trends =<br />&#160;&#160;new : context:obj -&gt; Trends<br />&#160;&#160;member Available : unit -&gt; string * &#39;a list<br /><br />Full name: index.Trends<br /><br />--------------------<br />new : context:obj -&gt; Trends</div>
<div class="tip" id="fs5">val context : obj</div>
<div class="tip" id="fs6">val t : Trends</div>
<div class="tip" id="fs7">member Trends.Available : unit -&gt; string * &#39;a list<br /><br />Full name: index.Trends.Available</div>
<div class="tip" id="fs8">val res : &#39;a</div>
<div class="tip" id="fs9">module Observable<br /><br />from Microsoft.FSharp.Control</div>
<div class="tip" id="fs10">val event : Event&lt;obj&gt;</div>
<div class="tip" id="fs11">Multiple items<br />module Event<br /><br />from Microsoft.FSharp.Control<br /><br />--------------------<br />type Event&lt;&#39;T&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;T&gt;<br />&#160;&#160;member Trigger : arg:&#39;T -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_&gt;<br /><br />--------------------<br />type Event&lt;&#39;Delegate,&#39;Args (requires delegate and &#39;Delegate :&gt; Delegate)&gt; =<br />&#160;&#160;new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;<br />&#160;&#160;member Trigger : sender:obj * args:&#39;Args -&gt; unit<br />&#160;&#160;member Publish : IEvent&lt;&#39;Delegate,&#39;Args&gt;<br /><br />Full name: Microsoft.FSharp.Control.Event&lt;_,_&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;T&gt;<br /><br />--------------------<br />new : unit -&gt; Event&lt;&#39;Delegate,&#39;Args&gt;</div>
<div class="tip" id="fs12">val agent : MailboxProcessor&lt;obj&gt;</div>
<div class="tip" id="fs13">Multiple items<br />type MailboxProcessor&lt;&#39;Msg&gt; =<br />&#160;&#160;interface IDisposable<br />&#160;&#160;new : body:(MailboxProcessor&lt;&#39;Msg&gt; -&gt; Async&lt;unit&gt;) * ?cancellationToken:CancellationToken -&gt; MailboxProcessor&lt;&#39;Msg&gt;<br />&#160;&#160;member Post : message:&#39;Msg -&gt; unit<br />&#160;&#160;member PostAndAsyncReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; Async&lt;&#39;Reply&gt;<br />&#160;&#160;member PostAndReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; &#39;Reply<br />&#160;&#160;member PostAndTryAsyncReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; Async&lt;&#39;Reply option&gt;<br />&#160;&#160;member Receive : ?timeout:int -&gt; Async&lt;&#39;Msg&gt;<br />&#160;&#160;member Scan : scanner:(&#39;Msg -&gt; Async&lt;&#39;T&gt; option) * ?timeout:int -&gt; Async&lt;&#39;T&gt;<br />&#160;&#160;member Start : unit -&gt; unit<br />&#160;&#160;member TryPostAndReply : buildMessage:(AsyncReplyChannel&lt;&#39;Reply&gt; -&gt; &#39;Msg) * ?timeout:int -&gt; &#39;Reply option<br />&#160;&#160;...<br /><br />Full name: Microsoft.FSharp.Control.MailboxProcessor&lt;_&gt;<br /><br />--------------------<br />new : body:(MailboxProcessor&lt;&#39;Msg&gt; -&gt; Async&lt;unit&gt;) * ?cancellationToken:System.Threading.CancellationToken -&gt; MailboxProcessor&lt;&#39;Msg&gt;</div>
<div class="tip" id="fs14">static member MailboxProcessor.Start : body:(MailboxProcessor&lt;&#39;Msg&gt; -&gt; Async&lt;unit&gt;) * ?cancellationToken:System.Threading.CancellationToken -&gt; MailboxProcessor&lt;&#39;Msg&gt;</div>
<div class="tip" id="fs15">val inbox : MailboxProcessor&lt;obj&gt;</div>
<div class="tip" id="fs16">val loop : (&#39;b -&gt; Async&lt;&#39;c&gt;)</div>
<div class="tip" id="fs17">val lastTime : &#39;b</div>
<div class="tip" id="fs18">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs19">val e : obj</div>
<div class="tip" id="fs20">member MailboxProcessor.Receive : ?timeout:int -&gt; Async&lt;&#39;Msg&gt;</div>
<div class="tip" id="fs21">val now : &#39;b</div>
<div class="tip" id="fs22">member Event.Trigger : arg:&#39;T -&gt; unit</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<section data-background-color="black">
<h1>Celebrating New Year's Eve<br /><small>with F# and Suave</small></h1>
<img src="images/fireworks.png" style="margin-top:10px;height:350px" />
<p><strong>Tomas Petricek</strong><br />
<a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> | <a href="http://fsharpworks.com">fsharpworks.com</a></p>
</section>
<section data-background-color="white">
<div style="background:url(images/advent.png) center/contain no-repeat;height:600px">
</div>
</section>
<section data-background-color="white">
<div style="background:url(images/factoryfactory.png) center/contain no-repeat;height:600px">
<h2 class="fragment" style="color:#d03057;transform:translateY(220px) rotate(-22deg)">Factory Factory</h2>
</div>
</section>
<section data-background-color="white">
<div style="background:url(images/fsformatting.png) center/contain no-repeat;height:600px">
<h2 class="fragment" style="color:#d03057;transform:translateY(220px) rotate(-22deg)">Docs Factory</h2>
</div>
</section>
<section data-background-color="white">
<div style="background:url(images/projectscaffold.png) center/contain no-repeat;height:600px">
<h2 class="fragment" style="color:#d03057;transform:translateY(220px) rotate(-22deg)">Factory Factory</h2>
</div>
</section>
<section >
<h1>What am I doing here?</h1>
<img src="images/what.jpg" style="height:300px" />
</section>
<section >
<img src="images/demo.gif" style="height:600px" class="fragment" />
</section>
<section >
<img src="images/nada.png" style="height:600px" />
</section>
<section >
<img src="images/nepal.png" style="height:600px" />
</section>
</section>
<section >
<section data-background-color="black">
<h1><strong>DEMO</strong></h1>
<h1>Listening to Tweets</h1>
<img src="images/fireworks.png" style="margin-top:50px;height:350px" />
</section>
<section data-background-color="white">
<img src="images/fstoolbox.png" style="height:600px" />
</section>
<section >
<h1>Adding Trends API</h1>
<br />
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="t">TrendsAvailable</span> <span class="o">=</span> <span class="i">JsonProvider</span><span class="o">&lt;</span><span class="s">&quot;json/trends_available.json&quot;</span><span class="o">&gt;</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="t">TrendsPlace</span> <span class="o">=</span> <span class="i">JsonProvider</span><span class="o">&lt;</span><span class="s">&quot;json/trends_place.json&quot;</span><span class="o">&gt;</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">TrendsClosest</span> <span class="o">=</span> <span class="i">JsonProvider</span><span class="o">&lt;</span><span class="s">&quot;json/trends_closest.json&quot;</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<br />
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span>  <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="t">Trends</span> (<span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">context</span><span class="o">:</span><span class="i">TwitterContext</span>) <span class="o">=</span>
  <span class="k">member</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="f">Available</span> () <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="i">res</span> <span class="o">=</span> <span class="i">TwitterRequest</span>(<span onmouseout="hideTip(event, 'fs5', 9)" onmouseover="showTip(event, 'fs5', 9)" class="i">context</span>)<span class="o">.</span><span class="i">RequestRawData</span>
      (<span class="s">&quot;https://api.twitter.com/1.1/trends/available.json&quot;</span>, [])
    <span class="i">TwitterTypes</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs1', 10)" onmouseover="showTip(event, 'fs1', 10)" class="i">TrendsAvailable</span><span class="o">.</span><span class="i">Parse</span>(<span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="i">res</span>)
</code></pre></td>
</tr>
</table>
</section>
</section>
<section >
<section data-background-color="black">
<h1><strong>DEMO</strong></h1>
<h1>Processing Tweets</h1>
<img src="images/fireworks.png" style="margin-top:50px;height:350px" />
</section>
<section >
<h1>Implementing Reactive Extensions</h1>
<br />
<div class="fragment">
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">liveTweets</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="i">Observable</span><span class="o">.</span><span class="i">limitRate</span> <span class="n">50</span>
</code></pre></td>
</tr>
</table>
</div>
<div class="fragment">
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="i">event</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="t">Event</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">T</span><span class="o">&gt;</span>()
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 15)" onmouseover="showTip(event, 'fs12', 15)" class="i">agent</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs13', 16)" onmouseover="showTip(event, 'fs13', 16)" class="t">MailboxProcessor</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 17)" onmouseover="showTip(event, 'fs14', 17)" class="f">Start</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs15', 18)" onmouseover="showTip(event, 'fs15', 18)" class="i">inbox</span> <span class="k">-&gt;</span>
  <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs16', 19)" onmouseover="showTip(event, 'fs16', 19)" class="f">loop</span> (<span onmouseout="hideTip(event, 'fs17', 20)" onmouseover="showTip(event, 'fs17', 20)" class="i">lastTime</span><span class="o">:</span><span class="i">DateTime</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs18', 21)" onmouseover="showTip(event, 'fs18', 21)" class="i">async</span> {
    <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs19', 22)" onmouseover="showTip(event, 'fs19', 22)" class="i">e</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="i">inbox</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 24)" onmouseover="showTip(event, 'fs20', 24)" class="f">Receive</span>()
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 25)" onmouseover="showTip(event, 'fs21', 25)" class="i">now</span> <span class="o">=</span> <span class="i">DateTime</span><span class="o">.</span><span class="i">UtcNow</span>
    <span class="k">if</span> (<span onmouseout="hideTip(event, 'fs21', 26)" onmouseover="showTip(event, 'fs21', 26)" class="i">now</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="i">lastTime</span>)<span class="o">.</span><span class="i">TotalMilliseconds</span> <span class="o">&gt;</span> <span class="i">milliseconds</span> <span class="k">then</span>
      <span onmouseout="hideTip(event, 'fs10', 28)" onmouseover="showTip(event, 'fs10', 28)" class="i">event</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 29)" onmouseover="showTip(event, 'fs22', 29)" class="f">Trigger</span>(<span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="i">e</span>)
      <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs16', 31)" onmouseover="showTip(event, 'fs16', 31)" class="f">loop</span> <span onmouseout="hideTip(event, 'fs21', 32)" onmouseover="showTip(event, 'fs21', 32)" class="i">now</span>
    <span class="k">else</span>
      <span class="k">return!</span> <span onmouseout="hideTip(event, 'fs16', 33)" onmouseover="showTip(event, 'fs16', 33)" class="f">loop</span> <span class="i">lastMessageTime</span> }
  <span onmouseout="hideTip(event, 'fs16', 34)" onmouseover="showTip(event, 'fs16', 34)" class="f">loop</span> <span class="i">DateTime</span><span class="o">.</span><span class="i">MinValue</span> )
</code></pre></td>
</tr>
</table>
</div>
</section>
</section>
<section >
<section data-background-color="black">
<h1><strong>DEMO</strong></h1>
<h1>Geolocating Users</h1>
<img src="images/fireworks.png" style="margin-top:50px;height:350px" />
</section>
<section data-background-color="white">
<img src="images/star.png" class="fragment" />
</section>
</section>
<section >
<section data-background-color="black">
<h1>SUMMARY</h1>
</section>
<section data-background-color="black">
<h1>Have F#un! :-)</h1>
<img src="images/fireworks.png" style="margin-top:50px;height:350px" />
<p>Tomas Petricek | <a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> | <a href="http://fsharpworks.com">fsharpworks.com</a></p>
</section>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'none', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

